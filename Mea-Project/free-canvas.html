<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mea - Tela Livre</title>
     <link rel="stylesheet" href="/Mea-Project/css/bootstrap.min.css">
     <link rel="stylesheet" href="/Mea-Project/css/style.css">
     <link rel="icon" href="/Mea-Project/assets/img/favicon.png">
     <!-- FontAwesome (icons) -->
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
     <!-- html2canvas para exportar a área completa -->
     <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body class="bg-light d-flex flex-column align-items-center py-3 canvas-body">

  <h2 class="mb-3 fw-semibold text-muted small">Tela Livre</h2>

  <div class="app-shell position-relative" style="width:380px;">

    <!-- topo fixo -->
    <div class="topbar d-flex justify-content-between align-items-center p-2 rounded"
         style="background:#fff4e0; border:1px solid #efe0c7;">
      <div class="d-flex gap-2 align-items-center">
        <!-- Dropdown Pincel / Seletor / Borracha / Cor -->
        <div class="dropdown">
          <button class="btn btn-sm btn-transparent p-0" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fa-solid fa-pen-to-square fa-lg"></i>
          </button>
          <ul class="dropdown-menu p-2">
            <li><button id="selectTool" class="btn btn-light btn-sm w-100 text-start mb-1"><i class="fa-solid fa-arrows-move me-2"></i> Seleção</button></li>
            <li><button id="brushTool" class="btn btn-light btn-sm w-100 text-start mb-1"><i class="fa-solid fa-pen me-2"></i> Pincel</button></li>
            <li><button id="eraserTool" class="btn btn-light btn-sm w-100 text-start mb-2"><i class="fa-solid fa-eraser me-2"></i> Borracha</button></li>
            <li><label class="small mb-1">Cor</label></li>
            <li><input id="topColorPicker" type="color" class="form-control form-control-color p-0" style="height:36px;"></li>
            <li class="mt-2"><label class="small mb-1">Espessura</label></li>
            <li><input id="brushSize" type="range" min="1" max="30" value="3" class="form-range"></li>
          </ul>
        </div>

        <button id="textTool" class="btn btn-transparent p-0 ms-2" title="Adicionar texto"><i class="fa-solid fa-font fa-lg"></i></button>
        <button id="noteTool" class="btn btn-transparent p-0 ms-2" title="Nota"><i class="fa-regular fa-rectangle-list fa-lg"></i></button>
        <button id="dupTool" class="btn btn-transparent p-0 ms-2" title="Duplicar selecionado"><i class="fa-regular fa-clone fa-lg"></i></button>
      </div>

      <div class="d-flex gap-2 align-items-center">
        <small class="text-muted">Zoom: <span id="zoomLabel">100%</span></small>
      </div>
    </div>

    <!-- área do canvas (com borda como na imagem) -->
    <div id="canvasFrame" class="mt-2 position-relative rounded"
         style="background:#fff7e6; border:8px solid rgba(0,0,0,0.06); height:560px; overflow:hidden;">
      <!-- wrapper que permite pan/zoom e que vai conter elementos posicionáveis -->
      <div id="canvasWrapper" class="position-absolute"
           style="left:0; top:0; width:1400px; height:1200px; transform-origin:0 0;">
        <canvas id="freeCanvas" width="1400" height="1200" style="background:transparent; display:block;"></canvas>
      </div>
    </div>

    <!-- rodapé fixo -->
    <div class="bottombar d-flex justify-content-around align-items-center p-2 mt-2 rounded"
         style="background:#fff4e0; border:1px solid #efe0c7;">
      <label class="mb-0 p-0" style="cursor:pointer;">
        <i class="fa-regular fa-image fa-2x" id="addImageBtn" title="Adicionar imagem"></i>
        <input id="imgUpload" type="file" accept="image/*" style="display:none">
      </label>

      <button id="brushSmallBtn" class="btn btn-transparent p-0" title="Pincel"><i class="fa-solid fa-pen fa-2x"></i></button>

      <button id="musicBtn" class="btn btn-transparent p-0" title="Adicionar música"><i class="fa-solid fa-music fa-2x"></i></button>

      <button id="filmBtn" class="btn btn-transparent p-0" title="Adicionar filme"><i class="fa-solid fa-film fa-2x"></i></button>
    </div>

  </div>

  <!-- Modais -->
  <div class="modal fade" id="musicModal" tabindex="-1">
    <div class="modal-dialog modal-sm modal-dialog-centered">
      <div class="modal-content rounded-3">
        <div class="modal-header">
          <h5 class="modal-title">Adicionar Música</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input id="musicTitle" class="form-control form-control-sm mb-2" placeholder="Título ou link">
          <textarea id="musicDesc" class="form-control form-control-sm" rows="3" placeholder="Por que essa música te define? (opcional)"></textarea>
          <div class="form-text small">Após adicionar, o cartão ficará na tela e você pode arrastar pra posicionar.</div>
        </div>
        <div class="modal-footer">
          <button id="saveMusic" class="btn btn-primary btn-sm">Adicionar</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="filmModal" tabindex="-1">
    <div class="modal-dialog modal-sm modal-dialog-centered">
      <div class="modal-content rounded-3">
        <div class="modal-header">
          <h5 class="modal-title">Adicionar Filme</h5>
          <button class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <input id="filmTitle" class="form-control form-control-sm mb-2" placeholder="Título do filme">
          <textarea id="filmDesc" class="form-control form-control-sm" rows="3" placeholder="Por que esse filme te representa? (opcional)"></textarea>
          <div class="form-text small">Após adicionar, o cartão ficará na tela e você pode arrastar/colocar onde quiser.</div>
        </div>
        <div class="modal-footer">
          <button id="saveFilm" class="btn btn-warning btn-sm">Adicionar</button>
        </div>
      </div>
    </div>
  </div>

  <!-- scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/Mea-Project/js/script.js"></script>
</body>
</html>
